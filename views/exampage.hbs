<!DOCTYPE html>
<html>
<head>
	<title>
		NFNLabs Exam
	</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width">  
	<link rel="stylesheet" type="text/css" href="/css/lib/fw/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/css/lib/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/css/exam.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="/js/vue@2.2.6.js"></script>
	
</head>
<body onload="fun()">

<nav class="navbar">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><img src="/logo.jpg" width="45"></a>
    </div>
    <p class="navbar-text" style="color: yellowgreen; padding-top: 30px; margin:0;">NFNLabs</p>
    <h2 class="navbar-text" style="position:absolute;top:11%;left:40%;" >OnlineTest</h2>
    <h3 class="navbar-text" style="position:absolute;top:11%;left:90%;" id="clock"></h3>
</nav>
	<div class="col-md-2 col-lg-2 col-sm-2">
		<ul class="list"> 
			<li class="fa fa-odnoklassniki-square"> <a href="/html/profile">Profile</a></li><br><br>
			<li class="fa fa-wpforms"> <a href="">Instruction</a></li><br><br><br>
			<h3>TEST</h3><br>
			<li class="fa fa-wpforms"> <a href="/">Logical</a></li><br><br>
			<li class="fa fa-wpforms"> <a href="">Resoning</a></li><br><br>
			<li class="fa fa-wpforms"> <a href="">Program</a></li><br><br>
		</ul>
	</div>
	<div class="col-md-10 col-lg-10 col-sm-10">
	<div class="qaa">
		 <form id="form">
			<div class="well">
			<small id="small"> Question</small> <small id="qtype"></small><br>
			<h4 id="question1" style="font-size:25px;"> 
			{{que}} ---------</h4>
			</div>
			 <div class="container-fluid">
			 			<div id="answer">
			 		 <div class="radio well btn-group btn-group" data-toggle="buttons" >
			 			<label><input type="radio" name="ans" value="a" id="u" class="rbtn"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle fa-2x"></i><span id="a" style="font-size:20px; padding-left:30px;">{{a}}</span></label>
			 		 </div>
			 		 <div class="radio well btn-group btn-group" data-toggle="buttons"">
			 			<label><input type="radio" name="ans" value="b" id="u" class="rbtn"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle fa-2x"></i>
			 			<span style="font-size:20px; padding-left:30px;" id="b">{{b}}</span></label>
			 		 </div>
			 		 <div class="radio well btn-group btn-group" data-toggle="buttons"">
			 			<label><input type="radio" name="ans" value="c" id="u" class="rbtn"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle fa-2x"></i><span id="c" style="font-size:20px; padding-left:30px;"> {{c}} </span></label>
			 		 </div>
			 
			 		 <div class="radio well btn-group btn-group" data-toggle="buttons"">
			 			<label><input type="radio" name="ans" value="d" id="u" class="rbtn"><i class="fa fa-circle-o fa-2x"></i><i class="fa fa-check-circle fa-2x"></i><span id="d" style="font-size:20px; padding-left:30px; ">{{d}}</span></label>
			 		 </div>
			 		 </div>			 	
			 		 </div>
			 		 <input type="text" id="fill" class="hidden" name="fill_in_the_blank_answer">
			 		 
			<ul class="nav navbar-nav navbar-right">
	        <li><button type="button" class="btn btn-default btn-block btn-lg" onclick="previous()"><b>Previous</b></button></li>
	        <li><button type="button" class="btn btn-success btn-block btn-lg" onclick="next()"> <b>Next </b></button></li> 
		 </form>
		</div></div>
	
	</div>

<script type="text/javascript">
	function fun(){
		init();
		$.get('/log',function(response){
    	json=response;
    	$("#qtype").text(json[0].question_Id);
      $("#question1").text(json[0].question);
      $("#a").text(json[0].a);
      $("#b").text(json[0].b);
      $("#c").text(json[0].c);
      $("#d").text(json[0].d);
      i=1;
    })};
	function secondsLeft() {
  var now = new Date()
  var mins = now.getMinutes();
  var secs = now.getSeconds();
 $("#clock").text(60 * 60 - (mins * 60 + secs));
}

function init() {
  timer = setInterval("secondsLeft()", 1000);
}
function previous(){

	 if(json[i-1].question_Type=='Objective'){
	 			$("#fill").attr('class','hidden');
				$("#answer").attr('class',"");
				$("#qtype").text(json[i-1].question_Id);
			  	$("#question1").text(json[i-1].question);
			  	$("#a").text(json[i-1].a);
			  	$("#b").text(json[i-1].b);
			  	$("#c").text(json[i-1].c);
			  	$("#d").text(json[i-1].d);
			  	if(i!==1){
			  	--i;}
			}
	else if(json[i-1].question_Type=='fill_in_the_blank_answer')
				{
					$("#fill").attr('class','');
				    $("#answer").attr('class',"hidden");
				    $("#qtype").text(json[i-1].question_Id);
				    $("#question1").text(json[i-1].question);		
				    --i;	
				}
}
function next(){

	if(!json[i]){alert("thankyou");}
	if($("#fill").val() =='')
	 var answer = $('input[name="ans"]:checked').val();
	if($('input[name="ans"]:checked').val()===undefined){
		var answer =  $("#fill").val();
	}
	 $.post('/result',{"answer":answer,"question_Id":json[i-1].question_Id});
	      	 if(json[i].question_Type=='Objective'){
	      	 	$("#qtype").text(json[i].question_Id);
			$("#question1").text(json[i].question);
			  $("#a").text(json[i].a);
			  $("#b").text(json[i].b);
			  $("#c").text(json[i].c);
			  $("#d").text(json[i].d);
			// $.post('/result',{"answer":$('input[name="ans"]:checked').val(),"question_Id":json[i].question_Id});			
				i++;
			}
				else if(json[i].question_Type=='fill_in_the_blank_answer')
				{
				$("#qtype").text(json[i].question_Id);
				$("#question1").text(json[i].question);
				$("#fill").attr('class','');
				$("#answer").attr('class',"hidden");
			
			// $.post('/result',{"answer":$("#fill").val(),"question_Id":json[i].question_Id});
			$("#fill").val('');
			i++;
				 }
				 $('input[name="ans"]').prop('checked',false);
			}
 $("#form").submit(function(e){
                e.preventDefault();
            });


</script>
</body>
</html>